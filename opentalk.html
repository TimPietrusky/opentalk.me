<head>
	<title>OpenTalk</title>
	<link rel='stylesheet' href='css/main.css'>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta http-equiv="cleartype" content="on">
	
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-40201469-3', 'opentalk.me');
		ga('send', 'pageview');
	</script>
</head>

<body>
	<div class="limit">
		<header>
			{{>login}} {{>selectChatRoom}}
		</header>
		<section>
			{{renderPage}}
		</section>
	</div>
</body>

<template name='login'>
	{{#if loggedInWithAccount}}
		<span class="user">{{username}}</span>
		{{>logout}}
	{{/if}}

	{{#if loggedInWithNickname}}
		<input type='text' class="user input-light change" value='{{username}}'/>
		{{>logout}}
	{{/if}}

	{{#unless loggedIn}}
		{{loginButtons}} or {{>pickNickname}}
	{{/unless}}
</template>


<template name='pickNickname'>
	<input type="text" id='nickname' class='input-light' placeholder='pick a nickname'>
</template>

<template name='logout'>
	<a href="#" id='logout' class='button silver'>Logout</a>
</template>


<template name='selectChatRoom'>
	{{#if loggedIn}}
		<input type='text' id='roomID' class='input-light {{#if roomSelected}}change{{/if}}' value='{{selectedRoom}}' placeholder='room'/>
	{{/if}}
</template>

<template name='messagesList'>
	{{#if roomSelected}}
		<a href="#" id='deleteMyMessages' class="button silver">X</a>

		<ul class='messages'>
			{{#each messages}}
				<li class='message'><b class='username'>{{user}}</b>: {{text}}</li>
			{{/each}}
		</ul>
		<input type='text' id='mymessage' class='input-light' placeholder='just write'/>
	{{/if}}
</template>

<template name='about'>
	test
</template>